import React from 'react';
import * as GlobalStyles from '../GlobalStyles.js';
import Breakpoints from '../utils/Breakpoints';
import * as StyleSheet from '../utils/StyleSheet';
import { ScreenContainer, WebView, withTheme } from '@draftbit/ui';
import { View, useWindowDimensions } from 'react-native';

const BlankScreen = props => {
  const dimensions = useWindowDimensions();
  const { theme } = props;

  return (
    <ScreenContainer hasSafeArea={false} scrollable={false}>
      <WebView
        allowFileAccessFromFileURLs={true}
        allowUniversalAccessFromFileURLs={true}
        cacheEnabled={true}
        incognito={true}
        javaScriptCanOpenWindowsAutomatically={true}
        javaScriptEnabled={true}
        mediaPlaybackRequiresUserAction={true}
        showsHorizontalScrollIndicator={true}
        showsVerticalScrollIndicator={true}
        source={{
          html: '<!DOCTYPE html>\n<html>\n<head>\n<meta charset="utf-8"> \n<title>画像からの地番取得</title>\n<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>\n<script type="text/javascript" src="https://ajxapi.glbs.jp/bxmp/api/v2/js/loadapi.php?v=39&enc=utf8&cnt=1">\n</script>\n\n<script type="text/javascript">\n    var $_layer = [];\n    var  mark_flag = true;\n    const LAYER_ICON_TS = 1;\n    // レイヤーの表示/非表示切替\n    this.layer = function(layerId, sw) {\n        if (MapControl.div.html() == "") {\n        return;\n        }\n        $_layer[layerId].setVisible(sw);\n    }\n    $.getScript("https://ajxapi.glbs.jp/bxmp/api/v2/js/loadapi.php?v=39&enc=utf8&cnt=1", function(){setTimeout("mapInit()",10000)});\n    $(window).load(function() {\n        personHidden();\n    });\n    /**\n     * 地図の初期化，登録処理\n     */\n    function mapInit(){\n        try{\n            if (GlbsAuth.getStatus()==GlbsAuth.STATUS_LOGIN) {\n                // ログイン済みの場合、すぐに地図を表示する。\n                dispMap();\n            }else {\n                // ログインしていない場合、ログインのための設定を行う。\n                // 「ログイン」ボタンclickイベントハンドラ\n                var cid = "madore";\n                var uid = "token001";\n                var pwd = "Ebe9q41E";\n                GlbsAuth.login(cid, uid, pwd);\n                // loginイベントリスナを設定\n                GlbsAuth.addEventListener("login", function(result) {\n                    if (result=="10100000") {\n                        // ログインに成功したら、API全体のロードを実行。完了するとloadイベントが発生する。\n                        GlbsAuth.loadAPI();\n                    } else {\n                        // ログインに失敗したらメッセージを表示\n                        information("ログインできませんでした。("+result+")");\n                    }\n                });\n                // loadイベントリスナを設定\n                GlbsAuth.addEventListener("load", function(result) {\n                    if (result=="19100000") {\n                        // ロードに成功したら、地図を表示する。\n                        dispMap();\n                    } else {\n                        // ロードに失敗したらメッセージを表示\n                        information("APIをロードできませんでした。("+result+")");\n                    }\n                });\n            } \n        } catch (e) {\n            alert(e.message);\n        }\n    }\n\n    /**\n     * 地図の初期化・表示処理\n     */\n    function dispMap() {\n        var opts = new GlbsMapOptions();\n        // 地図の初期化位置\n        opts.initPos = new GlbsPoint(492804453,126640759);\n        var screenWidth = $(window).width();\n        var screenHeight = $(window).height();\n        // 地図の表示範囲\n        opts.size = new GlbsSize(screenWidth,screenHeight-70);\n        opts.zoomBarType = GlbsMap.ZOOMBAR_TOP_UP;\n        opts.multiPopup=true;\n        map = new GlbsMap();\n        map.initialize(document.getElementById("mapContainer"), opts);\n        map.zoomTo(8);\n        $_layer[LAYER_ICON_TS] = new GlbsGeometryLayer();     // TSアイコン\n        $_layer[LAYER_ICON_TS].setVisible(true);\n        map.addCustomLayer($_layer[LAYER_ICON_TS], 99);\n        showKatudouArea(492783673, 126664808, LAYER_ICON_TS, 200);\n        hanreiMapShowMethod(492783673, 126664808, LAYER_ICON_TS,"image/buin_1.png",true,"1000");\n        hanreiMapShowMethod(492789276, 126631557, LAYER_ICON_TS,"image/buin_4.png",false,"1003");\n        hanreiMapShowMethod(492789982, 126651544, LAYER_ICON_TS,"image/buin_7.png",false,"1004");\n        hanreiMapShowMethod(492802511, 126646799, LAYER_ICON_TS,"image/buin_2.png",false,"1005");\n        hanreiMapShowMethod(492821217, 126662040, LAYER_ICON_TS,"image/buin_3.png",false,"1006");\n    };\n\n    function hanreiMapShowMethod(lon, lat,geometryLayer,imgurl,isclr,id){\n            // ピン表示をするHTMLを生成\n            var pinHtmlText1="";\n            if(isclr!=null){\n                if(isclr){\n                    pinHtmlText1 = "<div id=\'buin_"+id+"\'  style=\'z-index:999\'><div class=\'tantouimg_map\'>"\n                                + "<img src=\'"+imgurl+"\' >"\n                                + "</div></div>";\n                }else{\n                    pinHtmlText1 = "<div id=\'buin_"+id+"\' class=\'tantouimg_noclr_map\'>"\n                                + "<img src=\'"+imgurl+"\' >"\n                                + "</div>";\n                }\n            }else{\n                if(mark_flag){\n                    pinHtmlText1 = "<div id=\'mark_"+id+"\'>"\n                                + "<img src=\'"+imgurl+"\' style=\'width:32px\'>"\n                                + "</div>";\n                    $("#buin_"+id).hide();\n                }else{\n                    return;\n                }\n                \n            }\n            \n            // ピンを描画\n            var offset1 = new GlbsPoint();\n            offset1.x = -35;\n            offset1.y = -80;\n            var geoOption1 = new GlbsTextLabelOptions();\n            geoOption1.offset = offset1;\n            geoOption1.background = false;\n            geoOption1.zIndex = 30;\n            var pinPos1 = new GlbsPoint(lon, lat).toTokyo();\n            var geometry1 = new GlbsTextLabel(pinPos1, pinHtmlText1, geoOption1);\n            $_layer[geometryLayer].addGeometry(geometry1);\n            //MAP駅押す\n            if(isclr!=null){\n                geometry1.addEventListener("click", function(e){\n                    var layergeom_id  = $(this)[0].id;\n                    $("#onjob_status_bar").children().children("img").attr("src", "image/arrow_up.svg");\n                    $("#onjob_status_bar").animate({\n                    "height": "40px"\n                    }, 100);\n                    $(".activeStop").hide();\n                    $("#personTab").animate({\n                    "height": "240px"\n                    }, 100);\n                    $("#personTab").show();\n                    if(mark_flag){\n                        hanreiMapShowMethod(492799688, 126654132, LAYER_ICON_TS,"image/mark.png",null,id);\n                        mark_flag =false;\n                    }\n                });\n            }\n    }\n\n    function showKatudouArea(lon, lat, geometryLayer, jisyageoradius) {\n        var pos = new GlbsPoint(lon, lat);\n        //円オプション\n        var geopt;\n        geopt = new GlbsCircleOptions();\n        geopt.borderType = -1;\n        geopt.color = "#F2C2C7";\n        geopt.fill = 1;\n        geopt.opacity = 0.8;\n        geopt.visible = true;\n        geopt.zIndex = 10;\n        if (jisyageoradius == null) {\n            jisyageoradius = 180;\n        }\n        //円を追加\n        var geom;\n        geom = new GlbsCircle(pos, jisyageoradius, geopt);\n        $_layer[geometryLayer].addGeometry(geom);\n    }\n\n    function personHidden(){\n        $("#personHidden").on(\'click\',function(){\n            $("#personTab").hide();\n        });\n    }\n</script>\n<style>\n    * {\n        font-size: 16px;\n        font-family: sans-serif;\n        padding: 0;\n        margin: 0;\n        box-sizing: border-box;\n        outline: none;\n        -ms-user-select: none; /* IE 10+ */\n        -moz-user-select: -moz-none;\n        -khtml-user-select: none;\n        -webkit-user-select: none;\n        user-select: none;\n    }\n\n    #personTab {\n        position: absolute;\n        left: 0;\n        bottom: 70px;\n        z-index:99;\n        width: 100%;\n        height: 260px;\n        background-color:rgb(245, 245, 245);\n        display: block;\n        padding-left: 8px;\n        padding-right: 8px;\n    }\n\n    #personTab .personTab_tantouimg{\n        pointer-events: all;\n        width: 64px;\n        height: 64px;\n        border-radius: 50%;\n        border: 1px solid #CCCCCC;\n        display:flex;\n        justify-content:center;\n        align-items:center;\n        float: left;\n        margin-left: 15px;\n        width:10%\n    }\n\n    #personTab .personTab_photoflag{\n        pointer-events: all;\n        width: 40px;\n        height: 40px;\n        border-radius: 50%;\n        border: 1px solid #0078C9;\n        display:flex;\n        justify-content:center;\n        align-items:center;\n        float: left;\n        margin-left: 15px;\n    }\n\n    .personTab_tantouimg img{\n        width: 68px;\n    }\n\n    .personTab_photoflag img{\n        width: 30px;\n    }\n\n    .tantou_level{\n        border: 1px solid #C1C1C1;\n        padding: 1px 2px 1px 2px;\n        font-size: 10px;\n    }\n\n    .jissekicontent_line{\n        width: 100%;\n        padding: 2px;\n    }\n    \n    .jissekicontent_line_name{\n        font-size: 15px;\n        width: 200px;\n        margin-left: 46px;\n        color: #A7A7A7;\n    }\n\n    .jissekicontent_line_key{\n        font-size: 15px;\n        font-weight: bold;\n        padding-left: 30px;\n        width: 400px;\n    }\n\n    .jissekicontent_line_key_ki{\n        font-size: 8px;\n        color: #A7A7A7;\n    }\n\n    .jissekicontent_line_name1{\n        font-size: 14px;\n        width: 200px;\n        margin-left: 46px;\n        color: #A7A7A7;\n    }\n\n    .jissekicontent_line_key_red{\n        font-size: 15px;\n        font-weight: bold;\n        color: #CC2C37;\n        padding-left: 3px;\n    }\n\n    .jissekicontent_line_key_jian{\n        margin-right: 50px;\n        float: right;\n        font-size: 14px;\n        color: #000000;\n    }\n\n    .tantouimg_map{\n        pointer-events: all;\n        width: 50px;\n        height: 50px;\n        border-radius: 50%;\n        border: 3px solid #CC2C37;\n        display:flex;\n        justify-content:center;\n        align-items:center;\n    }\n\n    .tantouimg_noclr_map{\n        pointer-events: all;\n        width: 50px;\n        height: 50px;\n        border-radius: 50%;\n        border: 1px solid #CCCCCC;\n        background: #FFFFFF;\n        display:flex;\n        justify-content:center;\n        align-items:center;\n    }\n\n    .tantouimg_noclr_map img{\n        width: 45px;\n    }\n\n    .tantouimg_map img{\n        width: 45px;\n    }\n</style>\n\n</head>\n<body>\n<div id="content">\n<div id="mapContainer"></div>\n<div>glbsMap</div>\n<div id="personTab" style="display: none;">\n    <div style="width: 100%;padding: 10px;float: left;display:flex;justify-content:center;align-items:center;">\n        <div id="personHidden" style="background: #DBDBDB;width: 56px;height: 8px;border-radius: 4px;"></div>\n    </div>\n    <div style="width: 100%;height: 64px;float: left;">\n      <div style="float: left;width: 100%;height: 64px;">\n         <div class="personTab_tantouimg">\n            <img src="image/buin_2.png">\n         </div>\n         <div style="float: left;width: 40%;height: 100%;display:flex;justify-content:center;align-items:center;">\n             <div>\n                 <div style="float: left;width: 100%;padding-left:20px;font-size: 8px;color: #A7A7A7;">\n                    <span style="font-size: 14px;">営業担当・主任</span><span class="tantou_level" style="margin-left: 8px;">新卒</span> \n                 </div>\n                  <div style="float: left;width: 100%;margin-top: 5px;padding-left:20px">\n                     <span style="font-size: 26px;">斎藤 龍之介</span> \n                  </div>\n             </div> \n         </div>\n         <div style="float: right;width: 45%;height: 100%;display:flex;justify-content:center;align-items:center;">\n              <div class="personTab_photoflag"><img src="image/map_blue.svg"></div>\n              <div class="personTab_photoflag"><img src="image/phone_blue.svg"></div>\n              <div class="personTab_photoflag"><img src="image/msg_blue.svg"></div>\n         </div>\n      </div>\n    </div>\n    <div style="width: 100%;height: 1px;background: #CCCCCC;margin: 3px auto; float: left;" ></div>\n    <div style="width: 100%;float: left;" >\n                    <div class=\'jissekicontent_line\'>\n                        <span class=\'jissekicontent_line_name\' style="font-size: 10px;">未受注期间</span>\n                        <span class=\'jissekicontent_line_key\'>18ヵ月 （未受注SS）</span>\n                    </div>\n                    <div class=\'jissekicontent_line\'>\n                        <span class=\'jissekicontent_line_name\'>配置獲得</span>\n                        <span class=\'jissekicontent_line_key\'>999 日 経過</span>\n                        <span class=\'jissekicontent_line_key_ki\'>（2018/05/10）</span>\n                    </div>\n                    <div class=\'jissekicontent_line\'>\n                        <span class=\'jissekicontent_line_name\'>配置提出</span>\n                        <span class=\'jissekicontent_line_key\'>999 日 経過</span>\n                        <span class=\'jissekicontent_line_key_ki\'>（2018/05/10）</span>\n                    </div>\n                    <div class=\'jissekicontent_line\'>\n                        <span class=\'jissekicontent_line_name\'>収支説明</span>\n                        <span class=\'jissekicontent_line_key\'>999 日 経過</span>\n                        <span class=\'jissekicontent_line_key_ki\'>（2018/05/10）</span>\n                    </div>\n    </div>\n    <div style="width: 100%;height: 1px;background: #CCCCCC;margin: 3px auto; float: left;" ></div>\n    <div style="width: 100%;float: left;margin-top: 5px; margin-bottom: 5px;" >\n        <div class=\'jissekicontent_line\'>\n            <span class=\'jissekicontent_line_name1\'>同一地点に 15 分以上滞在</span>\n            <span class=\'jissekicontent_line_key_red\'>本日 5 回</span>\n            <span class=\'jissekicontent_line_key_red\'>今月 12 回</span>\n        </div>\n    </div>\n    <div style="width: 100%;height: 1px;background: #CCCCCC;margin: 3px auto; float: left;" ></div>\n</div>',
        }}
        startInLoadingState={true}
        style={StyleSheet.applyWidth(
          GlobalStyles.WebViewStyles(theme)['HTML View'],
          dimensions.width
        )}
      />
      <View />
    </ScreenContainer>
  );
};

export default withTheme(BlankScreen);
